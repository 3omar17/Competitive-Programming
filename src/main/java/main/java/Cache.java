package main.java;

import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.Executors;

/**
 * Cache to store positions which have been pre-evaluated.
 */
public class Cache {
    private final Map<Board, Boolean> map;

    public Cache() {
        map = new ConcurrentHashMap<>();
        Executors.newSingleThreadExecutor().submit(this::loadCache);
    }

    private void loadCache() {
        map.put(new Board(new int[][][]{{{1, 1}, {1, 4}, {1, 1}, {1, 1}, {1, 1}},
                {{1, 2}, {1, 1}, {1, 1}, {1, 5}, {1, 1}},
                {{1, 1}, {1, 1}, {1, 3}, {1, 4}, {0, 0}},
                {{1, 2}, {1, 3}, {1, 1}, {1, 2}, {1, 2}},
                {{1, 1}, {1, 2}, {1, 2}, {0, 0}, {1, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {1, 1}, {2, 2}, {2, 1}},
                {{1, 2}, {1, 3}, {2, 2}, {2, 1}, {2, 2}},
                {{1, 2}, {0, 0}, {0, 0}, {2, 3}, {2, 2}},
                {{1, 2}, {1, 3}, {0, 0}, {2, 1}, {2, 2}},
                {{1, 1}, {1, 2}, {1, 1}, {0, 0}, {2, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {0, 0}, {1, 2}, {2, 1}},
                {{1, 2}, {1, 2}, {1, 3}, {2, 1}, {2, 1}},
                {{1, 2}, {2, 1}, {1, 1}, {2, 3}, {2, 2}},
                {{1, 2}, {1, 3}, {1, 1}, {2, 1}, {2, 2}},
                {{1, 1}, {1, 2}, {1, 1}, {2, 1}, {2, 1}}}), true);
        map.put(new Board(new int[][][]{{{2, 1}, {2, 2}, {0, 0}, {1, 2}, {1, 1}},
                {{2, 1}, {2, 3}, {1, 3}, {1, 1}, {1, 2}},
                {{1, 2}, {2, 2}, {2, 1}, {1, 3}, {1, 2}},
                {{2, 1}, {2, 3}, {2, 1}, {2, 1}, {0, 0}},
                {{0, 0}, {2, 1}, {2, 1}, {2, 2}, {2, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {2, 1}, {2, 2}, {2, 1}},
                {{1, 2}, {1, 3}, {1, 2}, {2, 3}, {2, 2}},
                {{1, 2}, {1, 2}, {2, 1}, {2, 1}, {2, 2}},
                {{1, 2}, {2, 1}, {0, 0}, {0, 0}, {2, 2}},
                {{1, 1}, {1, 2}, {0, 0}, {2, 2}, {2, 1}}}), false);

        map.put(new Board(new int[][][]{{{2, 1}, {2, 2}, {2, 2}, {1, 2}, {1, 1}},
                {{2, 2}, {2, 1}, {2, 2}, {2, 3}, {1, 1}},
                {{2, 2}, {2, 2}, {2, 3}, {2, 3}, {1, 1}},
                {{0, 0}, {2, 2}, {2, 1}, {2, 2}, {1, 1}},
                {{2, 1}, {2, 2}, {2, 2}, {1, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{2, 2}, {2, 1}, {0, 0}, {2, 2}, {0, 0}},
                {{2, 2}, {2, 3}, {2, 3}, {2, 2}, {2, 1}},
                {{2, 2}, {2, 1}, {2, 1}, {2, 2}, {2, 1}},
                {{2, 1}, {2, 3}, {2, 3}, {2, 3}, {2, 2}},
                {{2, 1}, {2, 1}, {2, 1}, {0, 0}, {2, 2}}}), false);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {1, 1}, {2, 2}, {2, 1}},
                {{0, 0}, {1, 3}, {1, 2}, {2, 2}, {2, 2}},
                {{1, 2}, {1, 1}, {1, 2}, {2, 2}, {2, 2}},
                {{1, 2}, {1, 1}, {2, 3}, {2, 2}, {2, 1}},
                {{1, 1}, {2, 2}, {0, 0}, {2, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {0, 0}, {1, 2}, {2, 1}},
                {{1, 1}, {1, 3}, {1, 3}, {2, 1}, {2, 2}},
                {{1, 1}, {1, 2}, {1, 2}, {2, 2}, {2, 2}},
                {{1, 2}, {1, 1}, {1, 2}, {2, 3}, {0, 0}},
                {{1, 1}, {1, 1}, {1, 2}, {1, 1}, {2, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {0, 0}, {2, 2}, {2, 1}},
                {{1, 2}, {1, 3}, {2, 1}, {2, 3}, {2, 2}},
                {{1, 2}, {1, 3}, {0, 0}, {2, 3}, {2, 2}},
                {{1, 2}, {1, 1}, {1, 2}, {2, 2}, {2, 2}},
                {{1, 1}, {1, 2}, {0, 0}, {1, 1}, {2, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {2, 1}, {2, 1}, {2, 2}, {2, 1}},
                {{1, 1}, {2, 3}, {0, 0}, {2, 3}, {2, 2}},
                {{1, 1}, {1, 3}, {2, 2}, {2, 3}, {0, 0}},
                {{1, 1}, {1, 3}, {1, 1}, {0, 0}, {2, 2}},
                {{1, 1}, {1, 2}, {0, 0}, {1, 1}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {0, 0}, {1, 2}, {2, 1}},
                {{1, 2}, {1, 1}, {1, 3}, {0, 0}, {2, 1}},
                {{1, 2}, {1, 3}, {2, 2}, {0, 0}, {2, 2}},
                {{1, 2}, {1, 3}, {1, 1}, {0, 0}, {2, 2}},
                {{1, 1}, {1, 2}, {2, 1}, {2, 2}, {2, 1}}}), true);
        map.put(new Board(new int[][][]{{{2, 3}, {2, 2}, {0, 0}, {2, 2}, {2, 1}},
                {{2, 1}, {2, 1}, {2, 2}, {2, 3}, {0, 0}},
                {{2, 1}, {2, 3}, {2, 3}, {2, 2}, {2, 2}},
                {{2, 2}, {2, 1}, {2, 2}, {2, 2}, {2, 1}},
                {{2, 1}, {2, 1}, {2, 1}, {2, 1}, {0, 0}}}), false);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {1, 2}, {1, 2}, {1, 1}},
                {{1, 1}, {0, 0}, {1, 2}, {1, 3}, {1, 1}},
                {{1, 2}, {1, 3}, {1, 1}, {1, 2}, {1, 2}},
                {{1, 1}, {2, 1}, {2, 3}, {2, 1}, {1, 2}},
                {{2, 1}, {2, 2}, {2, 2}, {0, 0}, {1, 1}}}), true);
        map.put(new Board(new int[][][]{{{2, 1}, {2, 2}, {0, 0}, {2, 2}, {0, 0}},
                {{2, 1}, {2, 3}, {2, 2}, {1, 1}, {1, 2}},
                {{2, 1}, {2, 2}, {2, 3}, {1, 3}, {1, 1}},
                {{2, 1}, {2, 3}, {2, 2}, {0, 0}, {1, 2}},
                {{2, 1}, {2, 1}, {0, 0}, {2, 1}, {1, 1}}}), false);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {2, 1}, {2, 2}, {2, 1}},
                {{1, 2}, {1, 3}, {1, 2}, {2, 3}, {2, 2}},
                {{1, 2}, {1, 3}, {0, 0}, {2, 2}, {2, 2}},
                {{1, 1}, {0, 0}, {1, 2}, {2, 2}, {2, 1}},
                {{1, 1}, {2, 1}, {2, 2}, {2, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {2, 1}, {2, 1}, {2, 1}},
                {{1, 2}, {1, 2}, {2, 2}, {2, 1}, {2, 2}},
                {{1, 2}, {1, 1}, {2, 1}, {2, 3}, {2, 2}},
                {{1, 1}, {0, 0}, {2, 1}, {2, 3}, {2, 2}},
                {{1, 1}, {1, 2}, {2, 1}, {2, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{
                {{1, 1}, {1, 2}, {1, 2}, {2, 1}, {2, 1}},
                {{1, 2}, {1, 2}, {1, 1}, {2, 2}, {0, 0}},
                {{2, 2}, {2, 3}, {2, 1}, {2, 1}, {2, 2}},
                {{0, 0}, {2, 1}, {2, 3}, {0, 0}, {2, 1}},
                {{2, 1}, {2, 2}, {2, 2}, {2, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{1, 1}, {0, 0}, {1, 2}, {1, 2}, {1, 1}},
                {{1, 2}, {1, 1}, {1, 2}, {0, 0}, {1, 2}},
                {{1, 1}, {0, 0}, {1, 1}, {1, 3}, {2, 1}},
                {{1, 1}, {1, 3}, {2, 1}, {1, 1}, {1, 2}},
                {{1, 1}, {0, 0}, {1, 2}, {0, 0}, {1, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {0, 0}, {1, 3}, {1, 1}},
                {{1, 1}, {0, 0}, {1, 1}, {0, 0}, {1, 2}},
                {{0, 0}, {1, 2}, {1, 3}, {1, 1}, {1, 1}},
                {{1, 1}, {1, 3}, {1, 1}, {1, 3}, {1, 2}},
                {{1, 1}, {1, 2}, {1, 2}, {1, 1}, {1, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {1, 3}, {1, 1}, {0, 0}},
                {{1, 2}, {0, 0}, {1, 1}, {1, 3}, {1, 3}},
                {{1, 2}, {1, 3}, {1, 3}, {1, 1}, {1, 2}},
                {{1, 2}, {1, 2}, {1, 3}, {1, 3}, {1, 2}},
                {{1, 1}, {0, 0}, {1, 2}, {1, 2}, {1, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {1, 3}, {0, 0}, {1, 3}},
                {{1, 2}, {0, 0}, {1, 1}, {1, 3}, {1, 3}},
                {{1, 2}, {1, 3}, {1, 3}, {1, 1}, {1, 2}},
                {{1, 2}, {1, 2}, {1, 3}, {1, 3}, {1, 2}},
                {{1, 1}, {0, 0}, {1, 2}, {1, 2}, {1, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 2}, {1, 2}, {1, 3}, {1, 2}, {1, 4}},
                {{0, 0}, {1, 3}, {1, 3}, {1, 1}, {1, 2}},
                {{1, 2}, {1, 2}, {1, 1}, {1, 5}, {1, 1}},
                {{1, 2}, {1, 3}, {1, 3}, {1, 2}, {1, 2}},
                {{1, 1}, {1, 2}, {1, 2}, {1, 2}, {1, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {1, 2}, {1, 2}, {1, 1}},
                {{1, 1}, {1, 3}, {2, 1}, {2, 2}, {2, 1}},
                {{1, 1}, {2, 2}, {2, 3}, {2, 2}, {2, 2}},
                {{2, 2}, {2, 1}, {2, 1}, {2, 2}, {2, 2}},
                {{2, 1}, {0, 0}, {2, 2}, {2, 1}, {2, 1}}}), true);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 1}, {1, 2}, {2, 2}, {0, 0}},
                {{1, 2}, {1, 2}, {2, 2}, {2, 1}, {2, 2}},
                {{1, 1}, {1, 2}, {2, 3}, {2, 2}, {0, 0}},
                {{0, 0}, {1, 3}, {2, 3}, {2, 3}, {2, 2}},
                {{1, 1}, {2, 1}, {2, 1}, {2, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{0, 0}, {2, 4}, {2, 2}, {0, 0}, {2, 1}},
                {{2, 2}, {2, 2}, {2, 3}, {2, 3}, {2, 2}},
                {{2, 2}, {0, 0}, {2, 2}, {0, 0}, {2, 2}},
                {{2, 2}, {2, 3}, {2, 3}, {2, 3}, {2, 1}},
                {{0, 0}, {2, 1}, {2, 1}, {2, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{2, 3}, {2, 3}, {2, 1}, {2, 2}, {2, 2}},
                {{2, 1}, {2, 2}, {2, 3}, {2, 2}, {2, 2}},
                {{2, 2}, {0, 0}, {2, 2}, {0, 0}, {2, 2}},
                {{2, 2}, {2, 3}, {2, 3}, {2, 3}, {2, 1}},
                {{0, 0}, {2, 1}, {2, 1}, {2, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{2, 1}, {2, 2}, {2, 1}, {2, 2}, {2, 2}},
                {{2, 2}, {0, 0}, {2, 3}, {2, 2}, {2, 2}},
                {{2, 2}, {2, 2}, {2, 1}, {2, 3}, {2, 2}},
                {{2, 1}, {2, 1}, {2, 3}, {2, 1}, {2, 2}},
                {{2, 3}, {0, 0}, {2, 1}, {2, 2}, {2, 1}}}), false);
        map.put(new Board(new int[][][]{{{1, 1}, {1, 2}, {1, 1}, {0, 0}, {1, 2}},
                {{1, 2}, {1, 3}, {1, 1}, {1, 4}, {1, 2}},
                {{1, 3}, {1, 2}, {1, 3}, {1, 2}, {0, 0}},
                {{1, 1}, {1, 3}, {1, 2}, {1, 3}, {1, 2}},
                {{0, 0}, {1, 1}, {1, 1}, {1, 1}, {1, 1}}}), true);
    }

    public Boolean get(Board board) {
        return map.get(board);
    }
}